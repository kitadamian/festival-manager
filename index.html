<!DOCTYPE html>
<html lang="pl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=yes">
    <title>Mened≈ºer Festiwali ¬∑ Damian Kita</title>
    <style>
        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
        }

        body {
            font-family: 'Segoe UI', Roboto, system-ui, -apple-system, sans-serif;
            background: linear-gradient(145deg, #0b0f1c 0%, #1a1f33 100%);
            min-height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
            padding: 16px;
            margin: 0;
            color: #e0e0ff;
        }

        .game-container {
            max-width: 1200px;
            width: 100%;
            background: rgba(10, 14, 30, 0.85);
            backdrop-filter: blur(8px);
            border-radius: 48px 48px 32px 32px;
            box-shadow: 0 25px 40px -10px rgba(0,0,0,0.7), 0 0 0 2px #4e3a7c inset;
            padding: 24px 24px 16px;
            border: 1px solid #9f8be0;
        }

        /* nag≈Ç√≥wek i zasoby */
        .header {
            display: flex;
            flex-wrap: wrap;
            justify-content: space-between;
            align-items: center;
            gap: 16px;
            margin-bottom: 28px;
            background: #0e1428e0;
            padding: 18px 24px;
            border-radius: 200px;
            border: 1px solid #6c5fa0;
            box-shadow: 0 8px 0 #03050b;
        }

        h1 {
            font-size: 1.8rem;
            font-weight: 700;
            letter-spacing: 2px;
            background: linear-gradient(135deg, #d4b0ff, #b5a0ff);
            -webkit-background-clip: text;
            background-clip: text;
            color: transparent;
            text-shadow: 0 2px 5px #aa9aff55;
        }

        .resources {
            display: flex;
            flex-wrap: wrap;
            gap: 24px;
            font-weight: 600;
            font-size: 1.3rem;
        }

        .resource-item {
            background: #1f2645;
            padding: 8px 22px;
            border-radius: 40px;
            border: 1px solid #a691ff;
            box-shadow: inset 0 2px 3px #00000055, 0 4px 0 #0b0e1c;
            color: #f0e9ff;
        }

        .resource-item span {
            color: #ffd966;
            margin-right: 8px;
        }

        /* przyciski sterowania d≈∫wiƒôkiem */
        .sound-row {
            display: flex;
            justify-content: flex-end;
            gap: 12px;
            margin-bottom: 20px;
        }

        .sound-btn {
            background: #2a2550;
            border: none;
            color: white;
            font-size: 1.2rem;
            padding: 10px 22px;
            border-radius: 60px;
            font-weight: 600;
            border-bottom: 4px solid #121026;
            transition: 0.07s ease;
            cursor: pointer;
            box-shadow: 0 5px 0 #08061a;
            display: inline-flex;
            align-items: center;
            gap: 6px;
        }

        .sound-btn:active {
            transform: translateY(4px);
            border-bottom-width: 1px;
        }

        .sound-btn.mute {
            background: #3f3155;
        }

        /* lista miejsc / karty */
        .venues-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 18px;
            margin: 24px 0 28px;
        }

        .venue-card {
            background: #141b33;
            border-radius: 38px;
            padding: 18px 12px 16px;
            text-align: center;
            cursor: pointer;
            border: 2px solid transparent;
            transition: 0.2s;
            box-shadow: 0 10px 0 #080c1a;
            color: #cfc7ff;
        }

        .venue-card.selected {
            border: 2px solid #ffb870;
            background: #1f2b51;
            transform: scale(1.02);
            box-shadow: 0 0 20px #fdaa9b;
        }

        .venue-name {
            font-size: 1.5rem;
            font-weight: 700;
            margin-bottom: 4px;
            color: #ffffff;
        }

        .venue-location {
            font-size: 1rem;
            opacity: 0.9;
            margin-bottom: 12px;
        }

        .venue-stats {
            display: flex;
            justify-content: space-around;
            font-size: 0.9rem;
            background: #0f1730;
            padding: 8px 6px;
            border-radius: 60px;
        }

        /* panel sterowania koncertem */
        .control-panel {
            background: #131b37;
            border-radius: 60px;
            padding: 28px 28px;
            margin: 8px 0 22px;
            border: 1px solid #6d5db9;
            box-shadow: inset 0 2px 6px #00000077, 0 12px 0 #070b18;
        }

        .selected-venue-display {
            font-size: 1.7rem;
            font-weight: 600;
            margin-bottom: 8px;
            display: flex;
            align-items: center;
            gap: 10px;
            flex-wrap: wrap;
        }

        .fact-text {
            background: #20284d;
            padding: 14px 20px;
            border-radius: 60px;
            font-style: italic;
            margin: 18px 0 20px;
            border-left: 6px solid #f5b37b;
            color: #ece6ff;
            font-size: 1.1rem;
        }

        .slider-box {
            display: flex;
            flex-wrap: wrap;
            align-items: center;
            gap: 25px;
            margin: 20px 0 20px;
        }

        .slider-label {
            font-weight: 600;
            min-width: 150px;
            font-size: 1.2rem;
        }

        input[type=range] {
            flex: 2;
            min-width: 240px;
            height: 16px;
            border-radius: 20px;
            background: #2a2f55;
            -webkit-appearance: none;
        }

        input[type=range]::-webkit-slider-thumb {
            -webkit-appearance: none;
            width: 28px;
            height: 28px;
            background: #ffc285;
            border-radius: 50%;
            border: 2px solid white;
            box-shadow: 0 2px 10px black;
            cursor: pointer;
        }

        .promo-value {
            font-size: 1.5rem;
            font-weight: 800;
            color: #f5c896;
            min-width: 70px;
        }

        .action-buttons {
            display: flex;
            flex-wrap: wrap;
            gap: 20px;
            margin: 24px 0 10px;
            justify-content: center;
        }

        .primary-btn {
            background: #8b3cbf;
            border: none;
            color: white;
            font-weight: 700;
            font-size: 1.3rem;
            padding: 16px 42px;
            border-radius: 60px;
            border-bottom: 6px solid #411d64;
            cursor: pointer;
            transition: 0.07s;
            box-shadow: 0 7px 0 #2a1540;
            flex: 1 1 auto;
            min-width: 200px;
        }

        .primary-btn:active {
            transform: translateY(6px);
            border-bottom-width: 2px;
        }

        .secondary-btn {
            background: #305f7a;
            border-bottom: 6px solid #173143;
            box-shadow: 0 7px 0 #10212b;
        }

        /* dziennik wydarze≈Ñ */
        .log-panel {
            background: #0c1120e0;
            border-radius: 40px;
            padding: 18px 24px;
            margin: 18px 0 10px;
            border: 1px solid #7f6bc0;
            max-height: 120px;
            overflow-y: auto;
            font-size: 1rem;
            color: #cbc3ff;
        }

        /* stopka autor */
        .footer {
            margin-top: 28px;
            text-align: center;
            font-size: 1rem;
            padding: 8px;
            border-top: 1px dashed #6d5db9;
        }

        .footer a {
            color: #b8a9ff;
            text-decoration: none;
            font-weight: 600;
            border-bottom: 2px dotted #ab94ff;
        }

        /* responsywno≈õƒá */
        @media (max-width: 600px) {
            .game-container { padding: 16px; }
            .header { flex-direction: column; border-radius: 50px; }
            h1 { font-size: 1.6rem; }
            .resources { justify-content: center; }
            .venue-name { font-size: 1.3rem; }
            .control-panel { padding: 20px; }
            .primary-btn { font-size: 1.1rem; padding: 14px 20px; }
            .slider-box { flex-direction: column; align-items: flex-start; }
            .fact-text { font-size: 0.95rem; }
        }
    </style>
</head>
<body>
    <div class="game-container">
        <!-- nag≈Ç√≥wek i stan gry -->
        <div class="header">
            <h1>üé∏ FESTIVAL MANAGER</h1>
            <div class="resources">
                <div class="resource-item"><span>üí∞</span> <span id="budgetDisplay">5000</span></div>
                <div class="resource-item"><span>‚≠ê</span> <span id="popularityDisplay">30</span></div>
            </div>
        </div>

        <!-- Sterowanie d≈∫wiƒôkiem (wymaga interakcji) -->
        <div class="sound-row">
            <button class="sound-btn" id="enableAudioBtn">üîä W≈ÇƒÖcz muzykƒô</button>
            <button class="sound-btn mute" id="disableAudioBtn">üîá Wy≈ÇƒÖcz</button>
        </div>

        <!-- Lista kultowych miejsc -->
        <div class="venues-grid" id="venuesGrid"></div>

        <!-- Panel g≈Ç√≥wny - szczeg√≥≈Çy i promocja -->
        <div class="control-panel" id="controlPanel">
            <div class="selected-venue-display" id="selectedVenueName">üé§ Wybierz miejsce</div>
            <div class="fact-text" id="funFact">Kliknij na kartƒô, poznaƒá ciekawostkƒô...</div>

            <div class="slider-box">
                <span class="slider-label">üì¢ Bud≈ºet promocji ($)</span>
                <input type="range" id="promoSlider" min="0" max="1000" value="200" step="10">
                <span class="promo-value" id="promoValue">200</span>
            </div>

            <div class="action-buttons">
                <button class="primary-btn" id="playConcertBtn">üé§ GRAJ KONCERT</button>
                <button class="primary-btn secondary-btn" id="promoteBandBtn">‚ú® PROMUJ ZESP√ì≈Å</button>
            </div>
        </div>

        <!-- Dziennik zdarze≈Ñ (edukacyjny i informacyjny) -->
        <div class="log-panel" id="logPanel">
            ‚û°Ô∏è Witaj, mened≈ºerze! Wybierz miejsce i zagraj koncert.
        </div>

        <!-- Stopka z informacjƒÖ o autorze -->
        <div class="footer">
            üë§ Autor: <a href="https://linktr.ee/kitadamian" target="_blank" rel="noopener">Damian Kita</a> ¬∑ 2025 ¬∑ Projekt edukacyjny
        </div>
    </div>

    <script>
        (function() {
            // ------------------------ D≈πWIƒòK (Web Audio API) ------------------------
            let audioCtx = null;
            let backgroundInterval = null;
            let isAudioEnabled = false;
            const noteSequence = [261.63, 293.66, 329.63, 349.23, 392.00, 440.00, 493.88, 523.25]; // C4-C5
            let seqIndex = 0;

            function initAudio() {
                if (audioCtx) return audioCtx;
                try {
                    audioCtx = new (window.AudioContext || window.webkitAudioContext)();
                } catch (e) {
                    alert("Web Audio API nie jest wspierane :(");
                    return null;
                }
                return audioCtx;
            }

            function playEffect(frequency = 440, duration = 0.15, type = 'sine', volume = 0.1) {
                if (!audioCtx || audioCtx.state !== 'running') return;
                const osc = audioCtx.createOscillator();
                const gain = audioCtx.createGain();
                osc.type = type;
                osc.frequency.value = frequency;
                gain.gain.setValueAtTime(volume, audioCtx.currentTime);
                gain.gain.exponentialRampToValueAtTime(0.0001, audioCtx.currentTime + duration);
                osc.connect(gain).connect(audioCtx.destination);
                osc.start();
                osc.stop(audioCtx.currentTime + duration);
            }

            function playBackgroundMusic() {
                if (!audioCtx) return;
                if (backgroundInterval) clearInterval(backgroundInterval);
                // Prosta pƒôtla melodyczna co 500ms
                backgroundInterval = setInterval(() => {
                    if (!audioCtx || audioCtx.state !== 'running') return;
                    const note = noteSequence[seqIndex % noteSequence.length];
                    seqIndex++;
                    // delikatna melodyjka z kr√≥tkim d≈∫wiƒôkiem
                    const osc = audioCtx.createOscillator();
                    const gain = audioCtx.createGain();
                    osc.type = 'triangle';
                    osc.frequency.value = note;
                    gain.gain.setValueAtTime(0.04, audioCtx.currentTime);
                    gain.gain.exponentialRampToValueAtTime(0.001, audioCtx.currentTime + 0.35);
                    osc.connect(gain).connect(audioCtx.destination);
                    osc.start();
                    osc.stop(audioCtx.currentTime + 0.35);
                }, 520);
            }

            function stopBackgroundMusic() {
                if (backgroundInterval) {
                    clearInterval(backgroundInterval);
                    backgroundInterval = null;
                }
            }

            // W≈ÇƒÖcz d≈∫wiƒôk (wymagane przez u≈ºytkownika)
            document.getElementById('enableAudioBtn').addEventListener('click', function() {
                if (!audioCtx) audioCtx = initAudio();
                if (audioCtx && audioCtx.state !== 'running') {
                    audioCtx.resume().then(() => {
                        playBackgroundMusic();
                        playEffect(523.25, 0.2, 'sine', 0.1); // sygna≈Ç w≈ÇƒÖczenia
                        isAudioEnabled = true;
                    }).catch(e => console.warn(e));
                } else if (audioCtx && audioCtx.state === 'running') {
                    playBackgroundMusic();
                    playEffect(523.25, 0.2);
                    isAudioEnabled = true;
                }
            });

            document.getElementById('disableAudioBtn').addEventListener('click', function() {
                stopBackgroundMusic();
                if (audioCtx && audioCtx.state === 'running') {
                    // kr√≥tki d≈∫wiƒôk wyciszenia
                    playEffect(220, 0.2, 'sawtooth', 0.05);
                }
                isAudioEnabled = false;
            });

            // ------------------------ DANE GRY ------------------------
            const venues = [
                { name: "Madison Square Garden", city: "Nowy Jork", country: "USA", cost: 600, revenue: 2800, fact: "üé§ W Madison Square Garden wystƒÖpili Elvis, The Beatles i Michael Jackson. To 'najs≈Çynniejsza arena ≈õwiata'." },
                { name: "Royal Albert Hall", city: "Londyn", country: "Wielka Brytania", cost: 550, revenue: 2400, fact: "üèõÔ∏è Royal Albert Hall go≈õci≈Ço The Proms od 1941. W 1969 odby≈Ç siƒô tu ostatni koncert Cream." },
                { name: "Sydney Opera House", city: "Sydney", country: "Australia", cost: 720, revenue: 3100, fact: "ü¶ò Opera w Sydney ma w≈ÇasnƒÖ salƒô koncertowƒÖ o akustyce dostosowanej do orkiestry. KoncertujƒÖ tam ≈õwiatowe gwiazdy." },
                { name: "Tokyo Dome", city: "Tokio", country: "Japonia", cost: 900, revenue: 3900, fact: "üóº Tokyo Dome zwany 'Big Egg' ‚Äì wystƒôpowali tu Queen, Beyonc√©, Rolling Stones. Fani tworzƒÖ niesamowitƒÖ atmosferƒô." },
                { name: "Red Rocks", city: "Morrison", country: "USA", cost: 400, revenue: 1900, fact: "üèúÔ∏è Red Rocks to naturalny amfiteatr w ska≈Çach. Uwa≈ºane za jedno z najbardziej akustycznie doskona≈Çych miejsc." },
                { name: "Pla≈ºa Copacabana", city: "Rio", country: "Brazylia", cost: 1000, revenue: 5000, fact: "üåä Festiwal na Copacabanie gromadzi nawet 2 mln ludzi! W 2006 The Rolling Stones zagrali dla 1,5 mln widz√≥w." }
            ];

            // Stan gry
            let budget = 5000;
            let popularity = 30;
            let selectedVenueIndex = 0; // domy≈õlnie pierwsze

            // Elementy DOM
            const budgetSpan = document.getElementById('budgetDisplay');
            const popularitySpan = document.getElementById('popularityDisplay');
            const venuesGrid = document.getElementById('venuesGrid');
            const selectedVenueName = document.getElementById('selectedVenueName');
            const funFactDiv = document.getElementById('funFact');
            const promoSlider = document.getElementById('promoSlider');
            const promoValueSpan = document.getElementById('promoValue');
            const logPanel = document.getElementById('logPanel');
            const playBtn = document.getElementById('playConcertBtn');
            const promoteBtn = document.getElementById('promoteBandBtn');

            // Funkcja aktualizujƒÖca UI
            function refreshUI() {
                budgetSpan.textContent = budget;
                popularitySpan.textContent = popularity;
                promoValueSpan.textContent = promoSlider.value;

                // Od≈õwie≈ºenie zaznaczenia kart
                document.querySelectorAll('.venue-card').forEach((card, idx) => {
                    if (idx === selectedVenueIndex) card.classList.add('selected');
                    else card.classList.remove('selected');
                });

                const v = venues[selectedVenueIndex];
                selectedVenueName.innerHTML = `üéØ ${v.name} (${v.city})`;
                funFactDiv.textContent = `üí° Edukacja: ${v.fact}`;
            }

            // Dodanie logu
            function addLog(message, isSuccess = true) {
                const icon = isSuccess ? '‚úÖ' : '‚ùå';
                logPanel.innerHTML = `${icon} ${message}<br>${logPanel.innerHTML}`.substring(0, 300);
            }

            // Renderowanie kart miejsc
            function renderVenues() {
                venuesGrid.innerHTML = '';
                venues.forEach((v, i) => {
                    const card = document.createElement('div');
                    card.className = `venue-card ${i === selectedVenueIndex ? 'selected' : ''}`;
                    card.dataset.index = i;
                    card.innerHTML = `
                        <div class="venue-name">${v.name}</div>
                        <div class="venue-location">${v.city}, ${v.country}</div>
                        <div class="venue-stats">
                            <span>üí∞ koszt: $${v.cost}</span>
                            <span>üé´ przych√≥d: $${v.revenue}</span>
                        </div>
                    `;
                    card.addEventListener('click', (e) => {
                        selectedVenueIndex = i;
                        if (isAudioEnabled) playEffect(330, 0.1);
                        refreshUI();
                    });
                    venuesGrid.appendChild(card);
                });
            }

            // Sprawdzenie czy mo≈ºna graƒá
            function playConcert() {
                if (selectedVenueIndex === undefined) {
                    addLog('Wybierz miejsce koncertu!', false);
                    return;
                }
                const venue = venues[selectedVenueIndex];
                const promoAmount = Number(promoSlider.value);
                const totalCost = venue.cost + promoAmount;

                if (budget < totalCost) {
                    addLog(`‚ùå Za ma≈Ço kasy! Potrzebujesz $${totalCost}`, false);
                    if (isAudioEnabled) playEffect(180, 0.25, 'sawtooth', 0.1);
                    return;
                }

                // Obliczenie szansy: popularno≈õƒá (0-100) + promocja (0-100) -> max 200 daje ~80%? 
                // promocja w dolarach, zamieniamy na % (1$ = 0.1% sukcesu, max 100%)
                let chance = (popularity * 0.6) + (promoAmount * 0.15);  // np. pop=30 ->18%, prom 200$ ->30% =48% baza
                chance = Math.min(95, Math.max(10, chance)); // nie mniej ni≈º 10% i nie wiƒôcej ni≈º 95%
                const roll = Math.random() * 100;

                // efekty d≈∫wiƒôkowe
                if (isAudioEnabled) playEffect(400, 0.1, 'square');

                if (roll <= chance) {
                    // Sukces
                    const revenue = venue.revenue + Math.floor(promoAmount * 0.4); // promocja zwiƒôksza przych√≥d
                    budget += revenue - totalCost; // wp≈Çywy minus koszty
                    popularity = Math.min(100, popularity + 3 + Math.floor(promoAmount / 80));
                    addLog(`üèÜ KONCERT UDANY! Zarobi≈Çe≈õ $${revenue}. Publiczno≈õƒá oszala≈Ça! Popularno≈õƒá +${3+Math.floor(promoAmount/80)}`, true);
                    if (isAudioEnabled) playEffect(700, 0.2, 'sine', 0.12);
                } else {
                    // Pora≈ºka
                    budget -= totalCost; // tracisz koszta
                    popularity = Math.max(0, popularity - 5);
                    addLog(`üíî Koncert klapƒÖ... Mimo promocji frekwencja niska. Tracisz $${totalCost}`, false);
                    if (isAudioEnabled) playEffect(150, 0.4, 'sawtooth', 0.15);
                }

                // Ograniczenie bud≈ºetu (nie ujemny - ale wiadomo, mo≈ºe spa≈õƒá poni≈ºej zera? raczej nie powinien, ale dodajemy zabezpieczenie)
                if (budget < 0) budget = 0;
                refreshUI();
            }

            // Promowanie zespo≈Çu (globalny wydatek)
            function promoteBand() {
                const cost = 250;
                if (budget < cost) {
                    addLog('Za ma≈Ço pieniƒôdzy na promocjƒô zespo≈Çu.', false);
                    if (isAudioEnabled) playEffect(180, 0.2, 'sawtooth');
                    return;
                }
                budget -= cost;
                const gain = 5 + Math.floor(Math.random() * 11); // 5-15
                popularity = Math.min(100, popularity + gain);
                addLog(`üì¢ Kampania promocyjna zespo≈Çu! Popularno≈õƒá +${gain}`, true);
                if (isAudioEnabled) playEffect(620, 0.15, 'triangle');
                refreshUI();
            }

            // Inicjalizacja
            function initGame() {
                renderVenues();
                refreshUI();

                // Eventy
                promoSlider.addEventListener('input', (e) => {
                    promoValueSpan.textContent = e.target.value;
                });

                playBtn.addEventListener('click', () => {
                    playConcert();
                });

                promoteBtn.addEventListener('click', () => {
                    promoteBand();
                });

                // Dodatkowe efekty na przyciskach (opr√≥cz muzyki)
                playBtn.addEventListener('mousedown', () => {
                    if (isAudioEnabled) playEffect(300, 0.07, 'square', 0.05);
                });
                promoteBtn.addEventListener('mousedown', () => {
                    if (isAudioEnabled) playEffect(440, 0.06, 'square', 0.05);
                });
            }

            initGame();
        })();
    </script>
</body>
</html>